awk '{if($0 ~ /zero address/) {printf $0 " " ;getline;print} else if($0 ~ /random address/){printf $0 " ";getline;print}}' $1 > xx
awk '{if($0 ~ /zero address/) {zsum=zsum+substr($NF,1,length($NF)-2);zcnt=zcnt+1} else if(($0 ~ /random address/) && ($4==$6)) {lsum=lsum+substr($NF,1,length($NF)-2);lcnt=lcnt+1;} else if(($0 ~ /random address/) && ($4!=$6) && (($4<8 && $6<8)||($4>7 && $6>7))) {isum=isum+substr($NF,1,length($NF)-2);icnt=icnt+1;} else if(($0 ~ /random address/) && (($4<8 && $6>7)||($4>7 && $6<8)) ) {psum=psum+substr($NF,1,length($NF)-2);pcnt=pcnt+1;}} END{print "average cache hitting latency " zsum/zcnt;print "average local HBM latency " lsum/lcnt;print "average 1 nvswitch latency " isum/icnt;print "average 2 nvswitch latency "psum/pcnt}' xx
